DROP DATABASE IF EXISTS LimProject;
CREATE DATABASE LimProject;
USE LimProject;

# board 테이블 생성
CREATE TABLE board(
	id INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
	regDate DATETIME NOT NULL,
	updateDate DATETIME NOT NULL,
	`code` VARCHAR(20) NOT NULL UNIQUE COMMENT '공지, 인사이동, ...',
	`name` VARCHAR(20) NOT NULL UNIQUE COMMENT '게시판 이름',
	delStatus TINYINT UNSIGNED NOT NULL DEFAULT 0 COMMENT '삭제여부 (삭제 전 = 0, 삭제 후 = 1)',
	delDate DATETIME COMMENT '삭제 날짜'
);

# reactionPoint 테이블 생성	
CREATE TABLE reactionPoint(
	id INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
	regDate DATETIME NOT NULL,
	updateDate DATETIME NOT NULL,
    memberId INT UNSIGNED NOT NULL,
    relTypeCode VARCHAR(20) NOT NULL COMMENT '관련 데이터 타입 코드',
    relId INT UNSIGNED NOT NULL COMMENT '관련 데이터 번호',
	`point` SMALLINT NOT NULL DEFAULT 0
);

# reply 테이블 생성
CREATE TABLE reply(
	id INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
	regDate DATETIME NOT NULL,
	updateDate DATETIME NOT NULL,
    memberId INT UNSIGNED NOT NULL,
    relTypeCode VARCHAR(20) NOT NULL COMMENT '관련 데이터 타입 코드',
    relId INT UNSIGNED NOT NULL COMMENT '관련 데이터 번호',
	`body` TEXT NOT NULL
);

# article 테스트 데이터
INSERT INTO article
SET regDate = NOW(),
updateDate = NOW(),
memberId = 2,
boardId = 2,
title = '제목1',
`body` = '내용1';

INSERT INTO article
(
    regDate, updateDate, memberId, boardId, title, `body`
)
SELECT NOW(), NOW(), FLOOR(RAND() * 3) + 1, FLOOR(RAND() * 2) + 1, CONCAT('제목_', RAND()), CONCAT('내용_', RAND())
FROM article;


CREATE TABLE article(
	id INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
	regDate DATETIME NOT NULL,
	updateDate DATETIME NOT NULL,
	title VARCHAR(100) NOT NULL,
	`body` TEXT NOT NULL
);

ALTER TABLE article ADD COLUMN memberId INT UNSIGNED NOT NULL AFTER updateDate;
ALTER TABLE article ADD COLUMN boardId INT UNSIGNED NOT NULL AFTER memberId;
ALTER TABLE article ADD COLUMN hitCount INT UNSIGNED NOT NULL DEFAULT 0;


DROP TABLE article

CREATE TABLE `admin`(
	id INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
	regDate DATETIME NOT NULL,
	updateDate DATETIME NOT NULL,
	loginId VARCHAR(20) NOT NULL UNIQUE,
	loginPw VARCHAR(100) NOT NULL,
	`authLevel` SMALLINT UNSIGNED NOT NULL DEFAULT 3 COMMENT '권한 레벨 (일반 = 3, 관리자 = 7)',
	`name` VARCHAR(20) NOT NULL,
	cellphoneNum VARCHAR(20) NOT NULL,
	email VARCHAR(50) NOT NULL,
	delStatus TINYINT UNSIGNED NOT NULL DEFAULT 0 COMMENT '탈퇴여부 (탈퇴 전 = 0, 탈퇴 후 = 1)',
	delDate DATETIME COMMENT '탈퇴 날짜'
);


CREATE TABLE `member`(
	id INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
	regDate DATETIME NOT NULL,
	updateDate DATETIME NOT NULL,
	loginId VARCHAR(20) NOT NULL UNIQUE,
	loginPw VARCHAR(100) NOT NULL,
	`authLevel` SMALLINT UNSIGNED NOT NULL DEFAULT 3 COMMENT '권한 레벨 (일반 = 3, 관리자 = 7)',
	`name` VARCHAR(20) NOT NULL,
	cellphoneNum VARCHAR(20) NOT NULL,
	email VARCHAR(50) NOT NULL,
	delStatus TINYINT UNSIGNED NOT NULL DEFAULT 0 COMMENT '탈퇴여부 (탈퇴 전 = 0, 탈퇴 후 = 1)',
	delDate DATETIME COMMENT '탈퇴 날짜',
	permission INT NOT NULL,
	department VARCHAR(50),
	`position` VARCHAR(50)
	
);


CREATE TABLE join_requests(
	id INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
	regDate DATETIME NOT NULL,
	updateDate DATETIME NOT NULL,
	loginId VARCHAR(20) NOT NULL UNIQUE,
	loginPw VARCHAR(100) NOT NULL,
	`authLevel` SMALLINT UNSIGNED NOT NULL DEFAULT 3 COMMENT '권한 레벨 (일반 = 3, 관리자 = 7)',
	`name` VARCHAR(20) NOT NULL,
	cellphoneNum VARCHAR(20) NOT NULL,
	email VARCHAR(50) NOT NULL,
	delStatus TINYINT UNSIGNED NOT NULL DEFAULT 0 COMMENT '탈퇴여부 (탈퇴 전 = 0, 탈퇴 후 = 1)',
	delDate DATETIME COMMENT '탈퇴 날짜',
	permission INT DEFAULT 0,
	department VARCHAR(50),
	`position` VARCHAR(50)
	
);



SELECT * FROM suggestion


CREATE TABLE suggestion(
    id INT UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
    	regDate DATETIME NOT NULL,
    	monitor VARCHAR(50),
    	pc VARCHAR(50),
    	chair VARCHAR(50),
    	desck VARCHAR(50),
    	starex VARCHAR(50),
    	genesis VARCHAR(50),
    	potter VARCHAR(50),
    	reason1 VARCHAR(50),
    	reason2 VARCHAR(50),
    	destination VARCHAR(50)
    	
)

INSERT INTO `member`
SET regDate = NOW(),
updateDate = NOW(),
loginId = 'test1',
loginPw = 'test1',
`name` = '유저1',
cellphoneNum = '010-1112-1112',
email = 'test1@naver.com',
permission = 1,
department = '감사과',
`position` = '주무관';



DROP TABLE `member`;


INSERT INTO join_requests
SET regDate = NOW(),
updateDate = NOW(),
loginId = 'join2',
loginPw = 'join2',
`name` = '조인1',
cellphoneNum = '010-1j12-1112',
email = 'test1@naver.com',
permission = 0,
department = '기획재정담당관',
`position` = '서기관';

`   
INSERT INTO join_requests
SET regDate = NOW(),
updateDate = NOW(),
loginId = 'join8',
loginPw = 'join8',
`NAME` = '조인5',
cellphoneNum = '010-1j12-1112',
email = 'test1@naver.com',
permission = 0,
department = '정보과',
`POSITION` = '서기관';


INSERT INTO `ADMIN`
SET regDate = NOW(),
updateDate = NOW(),
loginId = 'admin',
loginPw = 'admin',
`NAME` = 'admin',
cellphoneNum = '010-1112-1112',
email = 'test1@naver.com';



SELECT *
				FROM join_requests


SELECT * FROM article;
SELECT * FROM `ADMIN`;
SELECT * FROM `MEMBER`;
SELECT * FROM join_requests;

DELETE FROM `MEMBER` WHERE id IN (1,2,3,4);

DELETE FROM join_requests
				WHERE id = 4
UPDATE `MEMBER`
SET permission = 1
WHERE id = 


디비를 부서별, 직급별로 나눈다

어드민 대시보드에서 가입된 멤버들 탭에서
전제 직원들 보기(직원검색 이름으로가능)와 
부서별로 보기(직원검색 이름으로가능) 

회웝가입시 인사이동 페이제
정보들을 자동으로 보여준다

인사이동 탭을 따로 만든다
인사이동 탭에는 부서와 직급에 대한 정보가 담겨져있는데
운영지원과, 정보과..... 주무관 사무관 과장 국장....

멤버들의 정보를 보여지게 되며
버튼으로 과와 직급을 변경 가능하다 직급에는 권한 등급이 담겨있다
변경된 내용들은 인사이동란, 페이지에 자동으로 게시된다.


모듈화 아이프레임

SELECT *
		FROM join_requests
		WHERE department = '정보과'
        -- AND name = #{name}

SELECT *
				FROM `MEMBER`
				WHERE department = '전체'
				
				

			UPDATE `MEMBER`
			set department = '기획재정담당관',
			    `POSITION` = '서기관'
			WHERE loginId = 4
			
버튼과 내용을 입력한것이 어드민 대시보드에 보여야한다

신청 테이블을 따로 만든다?
테이블에 들어갈 것들
모니터
피시
의자
책상
스타렉스
제네시스
포터
요청마다 
텍스트의 name을 다르게 준다

버튼을 클릭시 액션의 경로 이동한
이동한 경로의 어드민 컨트롤러에서 요청한것을
인설트를 하고 어드민 대시보드에서 새로운 탭을 만들어
신청자의 정보와 체크박스 내용과 사유를 확인한다

체크박스는 체크박스를 한순간에 자동으로 데이터가 담긴다

알큐로 겟으로 회원정보를 가져온다

또한 신청자가 신청을하면 신청을 완료 하였습니다라는
메세지가 나온후 자신이 신청한 내역이 목록으로 보인다
또한 어드민이 대시보드에서 승인 버튼을 누르면
신청자가 신청한 목록에서 신청이 승인,미승인 결과가 나온다

컬럼을 하나 더 남들어라 
업데이트 할때 이동한 부서만 남김






작성과 조인과 비슷한?

인설트

버튼을 클릭시 

